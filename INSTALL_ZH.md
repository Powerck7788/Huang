# å®‰è£æŒ‡å—

## å¿«é€Ÿé–‹å§‹ - ä¸€éµå®‰è£

é€™æ˜¯æ€§èƒ½å„ªåŒ–å·¥å…·åŒ…çš„ä¸­æ–‡å®‰è£æŒ‡å—ã€‚å¦‚æœæ‚¨åªçœ‹å¾—æ‡‚ä¸­æ–‡ï¼Œé€™ä»½æ–‡æª”å°‡å¹«åŠ©æ‚¨å¿«é€Ÿå®Œæˆæ‰€æœ‰å®‰è£è¨­ç½®ã€‚

### ğŸ“‹ å‰ç½®è¦æ±‚

åœ¨é–‹å§‹ä¹‹å‰ï¼Œè«‹ç¢ºä¿æ‚¨çš„ç³»çµ±å·²å®‰è£ï¼š

- **Node.js** (ç‰ˆæœ¬ 14 æˆ–æ›´é«˜)
  - ä¸‹è¼‰åœ°å€ï¼šhttps://nodejs.org/
  - å®‰è£å¾Œï¼Œåœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ `node -v` ç¢ºèªå®‰è£æˆåŠŸ

- **npm** (é€šå¸¸éš¨ Node.js ä¸€èµ·å®‰è£)
  - åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ `npm -v` ç¢ºèªå®‰è£æˆåŠŸ

### ğŸš€ æ–¹æ³•ä¸€ï¼šè‡ªå‹•å®‰è£ï¼ˆæ¨è–¦ï¼‰

é€™æ˜¯æœ€ç°¡å–®çš„æ–¹å¼ï¼è…³æœ¬æœƒè‡ªå‹•ç‚ºæ‚¨å®Œæˆæ‰€æœ‰è¨­ç½®ã€‚

#### æ­¥é©Ÿ 1ï¼šè¤‡è£½å„²å­˜åº«

```bash
git clone https://github.com/Powerck7788/Huang.git
cd Huang
```

#### æ­¥é©Ÿ 2ï¼šåŸ·è¡Œè‡ªå‹•å®‰è£è…³æœ¬

```bash
./å®‰è£.sh
```

æˆ–è€…å¦‚æœæ‚¨ç¿’æ…£è‹±æ–‡æª”åï¼š

```bash
./scripts/performance-setup.sh
```

#### æ­¥é©Ÿ 3ï¼šæŒ‰ç…§æç¤ºæ“ä½œ

è…³æœ¬æœƒå•æ‚¨ä¸€äº›å•é¡Œï¼š

1. **æ˜¯å¦ç¹¼çºŒå®‰è£ï¼Ÿ** - è¼¸å…¥ `y` ç„¶å¾ŒæŒ‰ Enter
2. **é¸æ“‡å®‰è£é¡å‹ï¼š**
   - `1` = å®Œæ•´å®‰è£ï¼ˆæ¨è–¦ï¼Œå®‰è£æ‰€æœ‰å·¥å…·ï¼‰
   - `2` = åŸºæœ¬å®‰è£ï¼ˆåªå®‰è£æ ¸å¿ƒå·¥å…·ï¼‰
   - `3` = è‡ªå®šç¾©å®‰è£ï¼ˆè‡ªå·±é¸æ“‡è¦å®‰è£çš„å·¥å…·ï¼‰
3. **æ˜¯å¦å‰µå»º GitHub Actionsï¼Ÿ** - è¼¸å…¥ `y` (æ¨è–¦) æˆ– `n`

å°±é€™éº¼ç°¡å–®ï¼è…³æœ¬æœƒè‡ªå‹•å®Œæˆå‰©ä¸‹çš„å·¥ä½œã€‚

### ğŸ“¦ æ–¹æ³•äºŒï¼šæ‰‹å‹•å®‰è£

å¦‚æœè‡ªå‹•å®‰è£é‡åˆ°å•é¡Œï¼Œæ‚¨å¯ä»¥æ‰‹å‹•åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š

#### æ­¥é©Ÿ 1ï¼šåˆå§‹åŒ–å°ˆæ¡ˆ

```bash
npm init -y
```

#### æ­¥é©Ÿ 2ï¼šå®‰è£å·¥å…·

```bash
# å®‰è£ Bundle åˆ†æå·¥å…·
npm install --save-dev webpack-bundle-analyzer
npm install --save-dev source-map-explorer

# å®‰è£æ€§èƒ½ç›£æ§å·¥å…·
npm install --save-dev lighthouse
npm install --save-dev size-limit
npm install web-vitals

# å®‰è£é–‹ç™¼å·¥å…·
npm install --save-dev webpack webpack-cli
npm install --save-dev @babel/core @babel/preset-env
```

#### æ­¥é©Ÿ 3ï¼šæ·»åŠ  npm è…³æœ¬

åœ¨ `package.json` æ–‡ä»¶ä¸­çš„ `scripts` éƒ¨åˆ†æ·»åŠ ï¼š

```json
{
  "scripts": {
    "analyze": "webpack-bundle-analyzer dist/static/js/*.js",
    "lighthouse": "lighthouse http://localhost:3000 --output=json",
    "size-limit": "size-limit",
    "build:analyze": "npm run build && npm run analyze"
  }
}
```

### ğŸ¯ å®‰è£å®Œæˆå¾Œçš„ä½¿ç”¨

å®‰è£å®Œæˆå¾Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

#### åˆ†æ Bundle å¤§å°

```bash
npm run build:analyze
```

é€™æœƒæ§‹å»ºæ‚¨çš„æ‡‰ç”¨ç¨‹å¼ä¸¦åˆ†ææ‰“åŒ…å¾Œçš„æ–‡ä»¶å¤§å°ã€‚

#### åŸ·è¡Œ Lighthouse å¯©æŸ¥

```bash
# é¦–å…ˆå•Ÿå‹•æ‚¨çš„é–‹ç™¼ä¼ºæœå™¨
npm start

# åœ¨å¦ä¸€å€‹çµ‚ç«¯æ©Ÿè¦–çª—åŸ·è¡Œ
npm run lighthouse
```

#### æª¢æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶

```bash
npm run size-limit
```

### ğŸ“ å®‰è£å¾Œå‰µå»ºçš„æ–‡ä»¶

è‡ªå‹•å®‰è£è…³æœ¬æœƒç‚ºæ‚¨å‰µå»ºä»¥ä¸‹æ–‡ä»¶ï¼š

```
Huang/
â”œâ”€â”€ lighthouse.config.js           # Lighthouse é…ç½®
â”œâ”€â”€ .size-limit.json              # æ–‡ä»¶å¤§å°é™åˆ¶é…ç½®
â”œâ”€â”€ performance-budget.json       # æ€§èƒ½é ç®—é…ç½®
â”œâ”€â”€ webpack.performance.config.js # Webpack é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js                  # ç¤ºä¾‹å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ performance.js        # æ€§èƒ½ç›£æ§å·¥å…·ä»£ç¢¼
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ performance.yml       # GitHub Actions å·¥ä½œæµç¨‹
```

### ğŸ”§ åœ¨æ‚¨çš„æ‡‰ç”¨ç¨‹å¼ä¸­ä½¿ç”¨

#### å°å…¥æ€§èƒ½ç›£æ§å·¥å…·

åœ¨æ‚¨çš„ä¸»æ‡‰ç”¨ç¨‹å¼æ–‡ä»¶ï¼ˆä¾‹å¦‚ `src/index.js` æˆ– `src/App.js`ï¼‰ä¸­ï¼š

```javascript
import { initPerformanceMonitoring } from './utils/performance.js';

// åˆå§‹åŒ–æ€§èƒ½ç›£æ§
initPerformanceMonitoring();

// æ‚¨çš„æ‡‰ç”¨ç¨‹å¼ä»£ç¢¼...
```

#### ä½¿ç”¨è‡ªå®šç¾©æ€§èƒ½æ¨™è¨˜

```javascript
import { performanceMark, performanceMeasure } from './utils/performance.js';

// æ¨™è¨˜é–‹å§‹
performanceMark('feature-start');

// åŸ·è¡Œä¸€äº›æ“ä½œ...
doSomething();

// æ¨™è¨˜çµæŸ
performanceMark('feature-end');

// æ¸¬é‡æ™‚é–“
performanceMeasure('feature-duration', 'feature-start', 'feature-end');
```

### ğŸ“ æ€§èƒ½ç›®æ¨™

å®‰è£çš„å·¥å…·æœƒå¹«åŠ©æ‚¨é”åˆ°ä»¥ä¸‹æ€§èƒ½ç›®æ¨™ï¼š

| æŒ‡æ¨™ | ç›®æ¨™å€¼ | èªªæ˜ |
|------|--------|------|
| JavaScript Bundle | < 200KB (gzipped) | æ‰“åŒ…å¾Œçš„ JS æ–‡ä»¶ç¸½å¤§å° |
| CSS Bundle | < 50KB (gzipped) | æ‰“åŒ…å¾Œçš„ CSS æ–‡ä»¶ç¸½å¤§å° |
| First Contentful Paint | < 1.8s | é¦–æ¬¡å…§å®¹ç¹ªè£½æ™‚é–“ |
| Largest Contentful Paint | < 2.5s | æœ€å¤§å…§å®¹ç¹ªè£½æ™‚é–“ |
| First Input Delay | < 100ms | é¦–æ¬¡è¼¸å…¥å»¶é²æ™‚é–“ |
| Cumulative Layout Shift | < 0.1 | ç´¯ç©ç‰ˆé¢é…ç½®ä½ç§» |

### â“ å¸¸è¦‹å•é¡Œ

#### Q: å®‰è£æ™‚å‡ºç¾æ¬Šé™éŒ¯èª¤æ€éº¼è¾¦ï¼Ÿ

A: åœ¨ Linux æˆ– macOS ä¸Šï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨ `sudo`ï¼š

```bash
sudo ./å®‰è£.sh
```

æˆ–è€…ä¿®æ”¹è…³æœ¬æ¬Šé™ï¼š

```bash
chmod +x å®‰è£.sh
./å®‰è£.sh
```

#### Q: å®‰è£å¤±æ•—ï¼Œé¡¯ç¤º "command not found"ï¼Ÿ

A: è«‹ç¢ºä¿æ‚¨å·²å®‰è£ Node.js å’Œ npmã€‚æ‚¨å¯ä»¥é€šéä»¥ä¸‹å‘½ä»¤æª¢æŸ¥ï¼š

```bash
node -v
npm -v
```

å¦‚æœæ²’æœ‰è¼¸å‡ºç‰ˆæœ¬è™Ÿï¼Œè«‹å…ˆå®‰è£ Node.jsã€‚

#### Q: æˆ‘åªæƒ³å®‰è£ç‰¹å®šçš„å·¥å…·ï¼Œè©²æ€éº¼åšï¼Ÿ

A: åŸ·è¡Œå®‰è£è…³æœ¬æ™‚é¸æ“‡ã€Œè‡ªå®šç¾©å®‰è£ã€ï¼ˆé¸é … 3ï¼‰ï¼Œç„¶å¾Œé¸æ“‡æ‚¨éœ€è¦çš„å·¥å…·ã€‚

#### Q: å¦‚ä½•æ›´æ–°å·²å®‰è£çš„å·¥å…·ï¼Ÿ

A: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°æ‰€æœ‰ä¾è³´ï¼š

```bash
npm update
```

æˆ–è€…é‡æ–°åŸ·è¡Œå®‰è£è…³æœ¬ã€‚

#### Q: GitHub Actions å·¥ä½œæµç¨‹æ˜¯åšä»€éº¼ç”¨çš„ï¼Ÿ

A: å®ƒæœƒåœ¨æ‚¨æ¯æ¬¡æ¨é€ä»£ç¢¼åˆ° GitHub æ™‚è‡ªå‹•æª¢æŸ¥æ€§èƒ½ï¼Œç¢ºä¿æ‚¨çš„æ‡‰ç”¨ç¨‹å¼ä¿æŒé«˜æ€§èƒ½ã€‚

### ğŸ“š é€²éšå­¸ç¿’è³‡æº

å®‰è£å®Œæˆå¾Œï¼Œå»ºè­°é–±è®€ä»¥ä¸‹æ–‡æª”æ·±å…¥äº†è§£ï¼š

- **PERFORMANCE_ANALYSIS.md** - è©³ç´°çš„æ€§èƒ½å„ªåŒ–ç­–ç•¥å’ŒæŠ€å·§
- **PERFORMANCE_SUMMARY.md** - æ€§èƒ½å„ªåŒ–å¿«é€Ÿåƒè€ƒæŒ‡å—
- **README.md** - å°ˆæ¡ˆæ¦‚è¿°å’Œå¿«é€Ÿé–‹å§‹

### ğŸ’¡ å¯¦ç”¨æŠ€å·§

1. **å®šæœŸæª¢æŸ¥ Bundle å¤§å°**ï¼šæ¯æ¬¡æ·»åŠ æ–°åŠŸèƒ½å¾Œé‹è¡Œ `npm run build:analyze`
2. **è¨­ç½®æ€§èƒ½é ç®—**ï¼šç·¨è¼¯ `performance-budget.json` è¨­ç½®æ‚¨çš„ç›®æ¨™
3. **æŒçºŒç›£æ§**ï¼šä½¿ç”¨ GitHub Actions è‡ªå‹•è¿½è¹¤æ€§èƒ½è®ŠåŒ–
4. **å­¸ç¿’å„ªåŒ–**ï¼šé–±è®€ PERFORMANCE_ANALYSIS.md äº†è§£æœ€ä½³å¯¦è¸

### ğŸ†˜ éœ€è¦å¹«åŠ©ï¼Ÿ

å¦‚æœæ‚¨åœ¨å®‰è£æˆ–ä½¿ç”¨éç¨‹ä¸­é‡åˆ°å•é¡Œï¼š

1. æª¢æŸ¥ [GitHub Issues](https://github.com/Powerck7788/Huang/issues)
2. æŸ¥çœ‹æ–‡æª”ä¸­çš„å¸¸è¦‹å•é¡Œéƒ¨åˆ†
3. ç¢ºä¿æ‚¨çš„ Node.js å’Œ npm ç‰ˆæœ¬æ˜¯æœ€æ–°çš„

### ğŸ‰ å®‰è£æˆåŠŸï¼

æ­å–œæ‚¨å®Œæˆå®‰è£ï¼ç¾åœ¨æ‚¨å¯ä»¥é–‹å§‹å„ªåŒ–æ‚¨çš„æ‡‰ç”¨ç¨‹å¼æ€§èƒ½äº†ã€‚

è¨˜ä½ï¼š
- âœ… å…ˆæ¸¬é‡ï¼Œå†å„ªåŒ–
- âœ… è¨­ç½®æ˜ç¢ºçš„æ€§èƒ½ç›®æ¨™
- âœ… æŒçºŒç›£æ§å’Œæ”¹é€²
- âœ… é—œæ³¨ç”¨æˆ¶é«”é©—

ç¥æ‚¨çš„æ‡‰ç”¨ç¨‹å¼æ€§èƒ½å„ªç•°ï¼ğŸš€
